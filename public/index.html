<!DOCTYPE html>
<html>

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
<title>Event App</title>

<!-- plugins css -->
<link rel="stylesheet" href="assets/bootstrap.css">
<link rel="stylesheet" href="assets/pace-theme-minimal.css">
<link rel="stylesheet" href="assets/perfect-scrollbar.min.css">
<link rel="manifest" href="/manifest.json">
<!-- page plugins css -->
<link rel="stylesheet" href="assets/jquery-jvectormap-1.2.2.css">
<link rel="stylesheet" href="assets/nv.d3.min.css">

<!-- core css -->
<link href="assets/ei-icon.css" rel="stylesheet">
<link href="assets/themify-icons.css" rel="stylesheet">
<link href="assets/font-awesome.min.css" rel="stylesheet">
<link href="assets/animate.min.css" rel="stylesheet">
<link rel="stylesheet" href="chat/chat.css">
<link href="assets/app.css" rel="stylesheet">
<style type="text/css">
   .jqstooltip {
      position: absolute;
      left: 0px;
      top: 0px;
      visibility: hidden;
      background: rgb(0, 0, 0) transparent;
      background-color: rgba(0, 0, 0, 0.6);
      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
      -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
      color: white;
      font: 10px arial, san serif;
      text-align: left;
      white-space: nowrap;
      padding: 5px;
      border: 1px solid white;
      z-index: 10000;
   }

   .jqsfield {
      color: white;
      font: 10px arial, san serif;
      text-align: left;
   }
</style>
<script src="cordova.js"></script>
</head>

<body class="pace-done" ng-app="myApp" ng-controller="AppController">
   <div class="app header-dark">
      <div class="layout">
         <!-- Side Nav START -->
         <div ng-include="'partials/side-nav.html'"></div>
         <!-- Side Nav END -->

         <!-- Page Container START -->
         <div class="page-container">
            <!-- Header START -->
            <div ng-include="'partials/header-nav.html'"></div>
            <!-- Header END -->

            <!-- Side Panel START -->
           
            <!-- Side Panel END -->

            <!-- theme configurator START -->
            <div ng-include="'partials/theme-config.html'"></div>
            <!-- theme configurator END -->

            <!-- Theme Toggle Button START -->
            <!--<button class="theme-toggle btn btn-rounded btn-icon">
                    <i class="ti-palette"></i>
                </button>-->
            <!-- Theme Toggle Button END -->

            <!-- Content Wrapper START -->
            <ui-view autoscroll="true" ng-click="hideMenu()"></ui-view>
            <!-- Content Wrapper END -->

            <!-- Footer START -->
            <div ng-include="'partials/side-panel.html'"></div>
            <!-- Footer END -->

         </div>
         <!-- Page Container END -->

      </div>
   </div>

   <!--<script src="assets/vendor.js"></script>


    <script src="assets/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="assets/jquery-jvectormap-us-aea.js"></script>
    <script src="assets/d3.min.js"></script>
    <script src="assets/nv.d3.min.js"></script>
    <script src="assets/index.js"></script>
    <script src="assets/Chart.min.js"></script>-->

   <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
      crossorigin="anonymous"></script>

   <script src="js/angular.min.js"></script>
   <script src="js/angular-ui-router.min.js"></script>
   <script src="js/angular-sanitize.min.js"></script>
   <script src="js/moment.min.js"></script>

   <script src="chat/assets/rltm/web/rltm.js"></script>
   <script src="chat/assets/angular-chat/angular-chat.js"></script>
   <script src="js/angular-youtube-api-factory.min.js"></script>

   <script src="js/azure-mobile-apps-client.js"></script>
   <script>
      var appUrl = 'https://fishry-app-services.azurewebsites.net/';
      var clientRef = new WindowsAzure.MobileServiceClient(appUrl);
      //alert(123);
      
   </script>
   <script src="data.js"></script>
   <script src="js/app.js"></script>
   <div style="
    background: #fff;
    top: 65px;" id="myModalAlert" class="modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-header">
         <h3 id="myModalLabel label-danger">Notification</h3>
      </div>
      <div class="modal-body">
         <p id="notidy">â€¦</p>
      </div>
      <div class="modal-footer">
         <button class="btn" data-dismiss="modal" aria-hidden="true" onclick="$('#myModalAlert').hide();">Close</button>
      </div>
   </div>
   <div class="app">
      <div id="deviceready" class="blink">
         <!--<p class="event listening">Connecting to Device</p>
      <p class="event received">Device is Ready</p>-->
      </div>
      <!--<br>
   <fieldset>
      <legend>Pushwoosh status:</legend>
      Push token: <br>
      <div class="statustext" id="pushToken"></div>
      Push message: <br>
      <div class="statustext" id="pushMessage"></div>
      Push data: <br>
      <div class="statustext" id="pushData"></div>
   </fieldset>-->
   </div>
   <script type="text/javascript">
      /*
  * Licensed to the Apache Software Foundation (ASF) under one
  * or more contributor license agreements.  See the NOTICE file
  * distributed with this work for additional information
  * regarding copyright ownership.  The ASF licenses this file
  * to you under the Apache License, Version 2.0 (the
  * "License"); you may not use this file except in compliance
  * with the License.  You may obtain a copy of the License at
  *
  * http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing,
  * software distributed under the License is distributed on an
  * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  * KIND, either express or implied.  See the License for the
  * specific language governing permissions and limitations
  * under the License.
  */

      function onPushwooshInitialized(pushNotification) {

         //if you need push token at a later time you can always get it from Pushwoosh plugin
         pushNotification.getPushToken(
            function (token) {
               console.info('push token: ' + token);
            }
         );

         //and HWID if you want to communicate with Pushwoosh API
         pushNotification.getPushwooshHWID(
            function (token) {
               console.info('Pushwoosh HWID: ' + token);
            }
         );

         //settings tags
         pushNotification.setTags({
            tagName: "tagValue",
            intTagName: 10
         },
            function (status) {
               console.info('setTags success: ' + JSON.stringify(status));
            },
            function (status) {
               console.warn('setTags failed');
            }
         );

         pushNotification.getTags(
            function (status) {
               console.info('getTags success: ' + JSON.stringify(status));
            },
            function (status) {
               console.warn('getTags failed');
            }
         );

         //start geo tracking.
         pushNotification.startLocationTracking();
      }

      function initPushwoosh() {
         var pushNotification = cordova.require("pushwoosh-cordova-plugin.PushNotification");

         //set push notifications handler
         document.addEventListener('push-notification',
            function (event) {
               var message = event.notification.message;
               var userData = event.notification.userdata;
               $('#myModalAlert').show();
               $('#notidy').text(message);
               //document.getElementById("pushData").innerHTML = JSON.stringify(event.notification) + "<p>";

               //dump custom data to the console if it exists
               if (typeof (userData) != "undefined") {
                  console.warn('user data: ' + JSON.stringify(userData));
               }
            }
         );

         //initialize Pushwoosh with projectid: "GOOGLE_PROJECT_ID", appid : "PUSHWOOSH_APP_ID". This will trigger all pending push notifications on start.
         pushNotification.onDeviceReady({
            projectid: "830789331488",
            appid: "3DB39-D9029",
            serviceName: ""
         });

         //register for push notifications
         pushNotification.registerDevice(
            function (status) {
               // document.getElementById("pushToken").innerHTML = status.pushToken + "<p>";
               onPushwooshInitialized(pushNotification);
            },
            function (status) {
               //alert("failed to register: " + status);
               console.warn(JSON.stringify(['failed to register ', status]));
            }
         );
      }

      var app = {
         // Application Constructor
         initialize: function () {
            this.bindEvents();
         },
         // Bind Event Listeners
         //
         // Bind any events that are required on startup. Common events are:
         // 'load', 'deviceready', 'offline', and 'online'.
         bindEvents: function () {
            document.addEventListener('deviceready', this.onDeviceReady, false);
         },
         // deviceready Event Handler
         //
         // The scope of 'this' is the event. In order to call the 'receivedEvent'
         // function, we must explicity call 'app.receivedEvent(...);'
         onDeviceReady: function () {
            initPushwoosh();
            app.receivedEvent('deviceready');
         },
         // Update DOM on a Received Event
         receivedEvent: function (id) {
            var parentElement = document.getElementById(id);
            var listeningElement = parentElement.querySelector('.listening');
            var receivedElement = parentElement.querySelector('.received');

            listeningElement.setAttribute('style', 'display:none;');
            receivedElement.setAttribute('style', 'display:block;');

            console.log('Received Event: ' + id);
         }
      };

      //app.initialize();

   </script>

</body>

</html>